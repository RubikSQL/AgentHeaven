core:
    env: dev
    debug: false
    encoding: utf-8
    http_proxy: null
    https_proxy: null
    tmp_path: "~/.ahvn/tmp/"
    cache_path: "~/.ahvn/cache/"
    encrypt_keys:
        - "api_key"
        - "token"
        - "password"
        - "url"

ukf:
    version: "1.0.0"
    text:
        id: 63
        short: 255
        medium: 2047
        long: 65535
    db:
        brief_enum_sample_top: 2
        brief_enum_sample_bottom: 1
        detail_enum_sample_top: 5
        detail_enum_sample_bottom: 5
        detail_col_sample_top: -1
        detail_col_sample_bottom: 2

klstore:
    batch_size: 512

klengine:
    batch_size: 512

user:
    user_id: admin

prompts:
    langs:
        - en
        - zh
    main: en
    lang: zh
    scan:
        - "& prompts/"
        - "~/.ahvn/prompts/"

llm:
    # LiteLLM compatible format:
    #   <provider>/<model_identifier>
    default_args:
        seed: 42
        timeout: 120
        http_proxy: null
        https_proxy: null
    
    default_preset: sys
    presets:
        sys:
            model: gemini-flash
        tiny:
            provider: ollama
            model: qwen3-8b
        local:
            provider: ollama
            model: gpt-oss
        chat-expert:
            model: gpt-5
        chat:
            model: dsv3
        chat-local:
            provider: ollama
            model: gpt-oss
        reason-expert:
            model: gemini-pro
        reason:
            model: dsr1
        reason-local:
            provider: ollama
            model: dsqw-32b
        coder-expert:
            model: opus
        coder:
            model: sonnet
        coder-local:
            provider: ollama
            model: qwen3-coder:30b
        translator:
            model: gemini-flash
        embedder-expert:
            provider: ollama
            model: qwen3-embedding:8b
        embedder:
            provider: ollama
            model: embeddinggemma

    default_model: gemini-flash
    models:
        GPT-5:
            aliases:
                - gpt5
                - GPT5
                - gpt-5
            default_provider: openrouter
            identifiers:
                openrouter: openai/gpt-5
                openai: gpt-5
        GPT-5-mini:
            aliases:
                - gpt5-mini
                - GPT5-mini
                - gpt-5-mini
                - 5-mini
            default_provider: openrouter
            identifiers:
                openrouter: openai/gpt-5-mini
                openai: gpt-5-mini
        gemini-2.5-flash:
            aliases:
                - gemini-flash
            default_provider: openrouter
            identifiers:
                openrouter: google/gemini-2.5-flash-preview-09-2025
                gemini: gemini-2.5-flash-preview-09-2025
        gemini-2.5-pro:
            aliases:
                - gemini-pro
            default_provider: openrouter
            identifiers:
                openrouter: google/gemini-2.5-pro
                gemini: gemini-2.5-pro
        Claude-Opus-4.1:
            aliases:
                - opus
                - opus4.1
                - Opus4.1
                - opus-4.1
                - Opus-4.1
                - claude-opus
                - Claude-Opus
                - claude-opus-4-1-20250805
            default_provider: openrouter
            identifiers:
                openrouter: anthropic/claude-opus-4.1
                anthropic: claude-opus-4-1-20250805
        Claude-Sonnet-4.5:
            aliases:
                - sonnet
                - sonnet4.5
                - Sonnet4.5
                - sonnet-4.5
                - Sonnet-4.5
                - claude-sonnet
                - Claude-Sonnet
                - claude-sonnet-4-5-20250929
            default_provider: openrouter
            identifiers:
                openrouter: anthropic/claude-sonnet-4.5
                anthropic: claude-sonnet-4-5-20250929
        DeepSeek-R1:
            aliases:
                - r1
                - dsr1
                - dsr1:671b
                - dsr1-671b
                - DeepSeek-R1
                - deepseek-r1
                - deepseek-r1:671b
            default_provider: openrouter
            identifiers:
                ollama: deepseek-r1:671b
                openrouter: deepseek/deepseek-r1-0528
        DeepSeek-V3:
            aliases:
                - v3
                - dsv3
                - dsv3:671b
                - dsv3-671b
                - DeepSeek-V3
                - deepseek-v3
                - deepseek-v3:671b
            default_provider: openrouter
            identifiers:
                ollama: deepseek-v3:671b
                openrouter: deepseek/deepseek-chat-v3-0324
        DeepSeek-V3.1-Terminus:
            aliases:
                - Terminus
                - terminus
                - dsv3.1
                - dsv3.1T
                - dsv3.1-t
                - dsv3.1-terminus
                - dsv3.1-terminus:671b
            default_provider: openrouter
            identifiers:
                ollama: deepseek-v3.1:671b
                openrouter: deepseek/deepseek-v3.1-terminus
        DeepSeek-V3.2-Exp:
            aliases:
                - ds
                - v3.2
                - dsv3.2
                - dsv3.2:671b
                - dsv3.2-671b
                - DeepSeek-V3.2-Exp
                - deepseek-v3.2-exp
                - deepseek-v3.2-exp:671b
                - deepseek-chat
                - deepseek-reasoner
            default_provider: openrouter
            identifiers:
                ollama: deepseek-v3.2:671b
                openrouter: deepseek/deepseek-v3.2-exp
                deepseek: deepseek-chat
        Grok-4:
            aliases:
                - grok4
                - Grok4
                - grok-4
                - grok-4-0709
            default_provider: openrouter
            identifiers:
                openrouter: x-ai/grok-4
                xai: grok-4-0709
        Kimi-K2:
            aliases:
                - kimi
                - kimi-k2
                - kimi-k2-0905
                - kimi-k2-0905-preview
            default_provider: openrouter
            identifiers:
                openrouter: moonshotai/kimi-k2-0905
                moonshot: kimi-k2-0905-preview
        DeepSeek-R1-Distilled-Qwen-32B:
            aliases:
                - dsqw
                - dsqw:32b
                - dsqw-32b
            default_provider: ollama
            identifiers:
                ollama: deepseek-r1:32b
                openrouter: deepseek/deepseek-r1-distill-qwen-32b
        Qwen3-Coder:
            aliases:
                - qwen3-coder
                - qwen3-coder:30b
                - qwen3-coder-30b
                - Qwen3-Coder-30B
            default_provider: ollama
            identifiers:
                ollama: qwen3-coder:30b
                openrouter: qwen/qwen3-coder
        Qwen3-30B-Instruct:
            aliases:
                - qwen-30b
                - qwen:30b
                - Qwen-30B
                - qwen3-30b
                - qwen3:30b
                - Qwen3-30B
                - Qwen3-30B-A3B
                - Qwen3-30B-A3B-Instruct-2507
            default_provider: ollama
            identifiers:
                ollama: qwen3:30b-a3b-instruct-2507-q4_K_M
                openrouter: qwen/qwen3-30b-a3b-instruct-2507
        Qwen3-8B:
            aliases:
                - qwen3-8b
                - qwen3:8b
                - Qwen3-8B
            default_provider: ollama
            identifiers:
                ollama: qwen3:8b
                lmstudio: qwen/qwen3-8b
                openrouter: qwen/qwen3-8b
        Qwen3-4B-Instruct:
            aliases:
                - qwen3-4b
                - qwen3:4b
                - Qwen3-4B
                - Qwen3-4B-Instruct-2507
            default_provider: ollama
            identifiers:
                ollama: qwen3:4b
                lmstudio: qwen/qwen3-4b-2507
        GPT-OSS:
            aliases:
                - oss
                - OSS
                - gpt-oss
                - gpt-oss:20b
                - gpt-oss-20b
                - GPT-OSS-20B 
            default_provider: ollama
            identifiers:
                ollama: gpt-oss:20b
                lmstudio: openai/gpt-oss-20b
                openrouter: openai/gpt-oss-20b
        all-MiniLM-L12-v2:
            aliases:
                - minilm
                - all-minilm
                - all-minilm:33m
                - all-MiniLM
            default_provider: ollama
            identifiers:
                ollama: all-minilm:33m
            dimension: 384
        EmbeddingGemma:
            aliases:
                - embeddinggemma
                - embedding-gemma
            default_provider: ollama
            identifiers:
                ollama: embeddinggemma
            dimension: 768
        bge-large:
            aliases:
                - bge
                - bge-large:335m
                - bge-large-en
                - bge-large-en-v1.5
            default_provider: ollama
            identifiers:
                ollama: bge-large:335m
            dimension: 1024
        bge-m3:
            aliases:
                - m3
                - BGE-M3
                - bge-m3:567m
            default_provider: ollama
            identifiers:
                ollama: bge-m3:567m
            dimension: 1024
        Qwen3-Embedding-8B:
            aliases:
                - qwen3-embedding
                - qwen3-embedding:8b
                - qwen3-embedding-8b
            default_provider: ollama
            identifiers:
                ollama: qwen3-embedding:8b
            dimension: 4096

    default_provider: openrouter
    providers:
        openrouter:
            backend: "openrouter"
            api_key: "<OPENROUTER_API_KEY>"
            api_base: "https://openrouter.ai/api/v1"
        openai:
            backend: ""
            api_key: "<OPENAI_API_KEY>"
            api_base: "https://api.openai.com/v1"
        gemini:
            backend: "gemini"
            api_key: "<GEMINI_API_KEY>"
        anthropic:
            backend: "anthropic"
            api_key: "<ANTHROPIC_API_KEY>"
        deepseek:
            backend: "deepseek"
            api_key: "<DEEPSEEK_API_KEY>"
            api_base: "https://api.deepseek.com/beta"
        xai:
            backend: "xai"
            api_key: "<XAI_API_KEY>"
        moonshot:
            backend: "moonshot"
            api_key: "<MOONSHOT_API_KEY>"
        ollama:
            backend: "ollama"
        lmstudio:
            backend: "lm_studio"
            api_base: "http://localhost:1234/v1"
        vllm:
            backend: "hosted_vllm" # Self-hosted VLLM uses "hosted_vllm" as the backend
            api_base: "<VLLM_API_BASE>"

    handle_model_mismatch: ignore
    cache_exclude_keys:
        - "base_url"
        - "api_key"
        - "api_base"
        - "api_version"
        - "timeout"
        - "num_retries"
        - "metadata"
        - "stream_options"
        - "logit_bias"
        - "log_probs"
        - "top_logprobs"
        - "input_cost_per_token"
        - "output_cost_per_token"
        - "model_list"
    retry:
        max_attempts: 3
        multiplier: 1
        max: 60
        reraise: True

db:
    # SQLAlchemy compatible format:
    #   <dialect>+<driver>://<username>:<password>@<host>:<port>/<database>
    default_provider: sqlite
    display:
        max_rows: 64
        max_width: 64
        style: "DEFAULT"
    providers:
        sqlite:
            dialect: sqlite
            database: "./.ahvn/sqlite.db"
        duckdb:
            dialect: duckdb
            database: "./.ahvn/duckdb.db"
        pg:
            dialect: postgresql
            driver: psycopg2
            host: "localhost"
            port: 5432
            username: "${whoami}"
        mysql:
            dialect: mysql
            driver: pymysql
            host: "localhost"
            port: 3306
            username: "root"

vdb:
    # Supports Lance, ChromaDB, Milvus, and PGVector
    default_provider: lancedb
    default_embedder: embedder
    providers:
        simple:
            backend: simple
        lancedb:
            backend: lancedb
            uri: "./.ahvn/lancedb/"
            collection: "default"
            refine_factor: 10
        chromalite:
            backend: chroma
            mode: "ephemeral"
            collection: "default"
        chroma:
            backend: chroma
            mode: "persistent"
            path: "./.ahvn/chromadb/"
            collection: "default"
        milvuslite:
            backend: milvus
            uri: "./.ahvn/milvus.db"
            collection: "default"
        milvus:
            backend: milvus
            uri: "http://localhost:19530"
            db_name: "default"
            collection: "default"
        pgvector:
            backend: pgvector
            dialect: postgresql
            host: "localhost"
            port: 5432
            username: "${whoami}"
            collection: "default"

mdb:
    # MongoDB configuration (Community Edition)
    default_embedder: embedder  # for vector search support
    vector_index:
        type: "vector"
        similarity: "cosine"
        quantization: "scalar"
    default_args:
        host: "localhost"
        port: 27017
        username: null
        password: null
        authSource: "admin"
        database: "default"
        collection: "default"

imitator:
    scheduler:
        trigger: "cron"
        minute: "0,30"
        hours: "1-5"
        max_instances: 1

repos: {}
